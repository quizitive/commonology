{% extends 'game/base.html' %}
{% load static %}

{% block page_style %}
  <link rel=stylesheet href="{% static 'leaderboard/css/results.css' %}?v=1.3">
  <style>
  [role="button"]:focus {border: 1px solid #2a9fbc;outline:none;}

  </style>
{% endblock %}

{% block scripts %}
  {% if editable %}
     <script src="{% static 'game/js/game_form.js' %}"></script>
     <script src='https://www.google.com/recaptcha/api.js'></script>
     <script>
        function onSubmit(token) {document.getElementById("game_form").submit();}
     </script>
{% endif %}

{% endblock %}

{% block title %}Commonology | Game {{ game.game_id }}{% endblock %}

{% block content %}
  <div class="content">

  <div class="series-header w3-round w3-padding-large w3-border w3-margin-top w3-margin-bottom"
       style="background: white;">
  <img src="{% static 'img/logo.svg' %}">
  </div>

    {% if game.top_commentary %}
    <div class="answer-slides w3-card-0 w3-round w3-container w3-padding w3-round" style="position: relative;background: white; border: 1px solid lightgrey; border-top: 5px solid #0095da;">
      {{ game.top_commentary|safe }}
    </div>
    {% endif %}

    <div class="cg-border-blue">

      <form id="game_form" method="post" action="{% url 'series-game:game-form' series_slug game.game_id %}" novalidate>
       {% csrf_token %}
        <input type="hidden" id="psid" name="psid" value="{{ psid }}">

       <!-- Display Name Form -->
      {% include 'game/cards/display_name_card.html' with text='Name (First & Last - this appears on results leaderboard!)  ' form=dn_form %}

        {% for q, form in questions %}
          {% include 'game/cards/question_form_card.html' with text=q.text q=q responses=q.choices%}
        {% endfor %}

        <div class="w3-container w3-padding-48" style="max-width:480px;margin:auto;">
          {% if editable %}
          <button class="g-recaptcha w3-button w3-round w3-block cg-blue w3-margin-bottom"
                      style="width: 100%"
                      data-sitekey={{recaptcha_key}}
                      data-callback='onSubmit' data-action='submit'>Submit</button>
          <p class="w3-container w3-center w3-margin-top" style="color:#9e9e9e;margin:auto;font-style:italic">
            A copy of your responses will be emailed to you
          </p>
          {% else %}
          <p class="w3-container w3-center w3-margin-top" style="color:#9e9e9e;margin:auto;font-style:italic">
            Thanks for playing!
          </p>
          {% endif %}

        </div>


      </form>
    </div>
  </div>
{% endblock %}