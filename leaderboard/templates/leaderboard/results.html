{% extends 'leaderboard/base.html' %}
{% load static %}

{% block title %}Commonology | Results{% endblock %}

{% block page_style %}
  <link rel="stylesheet" href="{% static 'leaderboard/css/results.css' %}?v=1.3">
{% endblock %}

{% block scripts %}
  <script src="{% static 'leaderboard/js/results.js' %}"></script>
  <script src="{% static 'chat/js/comments.js' %}"></script>
{% endblock %}

{% block content %}

<div class="content">

{{ room_name|json_script:"room-name" }}
{{ user.get_username|json_script:"user-name" }}
<div id="comment-connection" hx-ws="connect:/ws/chat/{{ game_id }}/">

  <div class="card-content">

   <div class="w3-round w3-round w3-margin-bottom w3-margin-top" style="position: relative;background: white; border: 1px solid lightgrey; border-top: 5px solid #0095da;">
    {% include 'leaderboard/components/game_header.html' with view="results" %}
   </div>

    {% include 'leaderboard/components/my_score.html' %}

    <div class="w3-round w3-round w3-margin-bottom" style="position: relative;background: white; border: 1px solid lightgrey; border-top: 5px solid #0095da;">
    {% if game_top_commentary %}
    <div class="answer-slides w3-card-0 w3-round w3-container w3-padding w3-margin-bottom" style="position: relative;">
      {{ game_top_commentary|safe }}
    </div>
    {% endif %}
    </div></div>

    {# Results objs go here #}
    {% for q in questions %}
      {% include 'leaderboard/components/results_card.html' with text=q.text q=q responses=responses %}
    {% endfor %}

  </div>

    {% if game_bottom_commentary %}
    <style>
    #bottom-commentary img {
      max-width: 100%!important;
      height: auto!important;
    }
    </style>
    <div id="bottom-commentary" class="w3-card-0 w3-round w3-container w3-padding w3-margin-bottom" style="position: relative;">
      {{ game_bottom_commentary|safe }}
    </div>
    {% endif %}

    <div class="w3-row w3-padding-large"></div>

  </div>
</div>
{% endblock content %}